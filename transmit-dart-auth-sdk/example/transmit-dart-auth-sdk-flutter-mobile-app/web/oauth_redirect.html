<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>OAuth Redirect</title>
    <script>
      window.onload = function () {
        var fragment = window.location.hash.substring(1);
        var params = {};
        fragment.split("&").forEach(function (pair) {
          var parts = pair.split("=");
          params[decodeURIComponent(parts[0])] = decodeURIComponent(parts[1]);
        });

        window.opener.postMessage(
          {
            type: "authorization_response",
            response: params,
          },
          "*"
        );
        window.close();
      };
    </script>
  </head>
  <body>
    <p>Authentication successful. You can close this window.</p>
  </body>
</html>
